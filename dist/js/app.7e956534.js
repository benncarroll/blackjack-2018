(function(t){function e(e){for(var i,r,o=e[0],l=e[1],c=e[2],u=0,d=[];u<o.length;u++)r=o[u],a[r]&&d.push(a[r][0]),a[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);h&&h(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,o=1;o<s.length;o++){var l=s[o];0!==a[l]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=s[0]))}return t}var i={},a={app:0},n=[];function r(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var h=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var i=s("64a9"),a=s.n(i);a.a},"2ab4":function(t,e,s){},4366:function(t,e,s){},"46b0":function(t,e,s){"use strict";var i=s("8267"),a=s.n(i);a.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("097d");var i=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[t._m(0),s("div",{staticClass:"pyro-box",class:{clear:!t.playerHasWon}},[s("canvas",{staticClass:"max",attrs:{id:"pyro"}},[t._v("Canvas is not supported in your browser.")])]),s("router-view",{staticClass:"max",attrs:{tag:"div"},on:{playerWin:t.startFireworks,reset:t.stopFireworks}})],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"overlay-padding"},[s("div",{staticClass:"overlay-box"},[s("p",[t._v("Your screen size is too small to play Blackjack!")]),s("p",[t._v("Try it on a different screen or if on a mobile device, flip horizontally.")])])])}],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main noselect"},[s("div",{staticClass:"dealer-bar"},[s("Dealer",{attrs:{dObject:t.dealer},on:{deal:t.dealAll,superDeal:t.superDeal}}),s("button",{staticClass:"hide",attrs:{id:"setup"},on:{click:function(e){t.runGame("setup")}}},[t._v("Setup")])],1),s("div",{staticClass:"hand-bar"},t._l(t.players,function(e){return s("Hand",{key:e.id,attrs:{hObject:e},on:{action:t.handEvent,setPlayer:function(s){t.setPlayer(e.id)}}})}))])},o=[],l=(s("6c7b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card noselect",on:{click:function(e){t.cObject.flipped=!t.cObject.flipped}}},[s("div",{staticClass:"wrapper",class:{blackjack:1==t.hand_stat,bust:2==t.hand_stat,stood:3==t.hand_stat,overturned:t.cObject.flipped},style:{color:this.getSuitData("colour",t.cObject.suit)}},[s("span",{staticClass:"value"},[t._v(t._s(t.cObject.face_value.toUpperCase())+" ")]),s("span",{staticClass:"icon"},[t._v(t._s(t.getSuitData("icon",this.cObject.suit)))])])])}),c=[],h={name:"Card",props:["cObject","hand_stat"],data:function(){return{card_overturned:!1}},methods:{getSuitData:function(t,e){var s={s:["♠","black"],h:["♥","red"],c:["♣","black"],d:["♦","red"]},i={icon:0,colour:1};if(e in s&&t in i)return s[e][i[t]]}}},u=h,d=(s("fddd"),s("2877")),p=Object(d["a"])(u,l,c,!1,null,"6b4a8f14",null);p.options.__file="Card.vue";var f=p.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hand-main main",class:{darken:!t.hObject.isTurn,blacken:t.hObject.hasLost,brighten:t.hObject.hasWon}},[s("div",{staticClass:"value"},[t._v(" "+t._s(t.hObject.value_display())+" ")]),s("div",{staticClass:"hand",class:{wide:t.hObject.isPlayer},style:{backgroundColor:t.hObject.colour}},[s("div",{staticClass:"flex flex-horizontal min-max"},[s("div",{staticClass:"card-column"},t._l(t.hObject.cards,function(e){return s("Card",{key:e.id,attrs:{cObject:e,hand_stat:t.hObject.quick_status()}})})),s("div",{staticClass:"flex flex-vertical m-l-15 buttonbox",class:{minibutton:!t.hObject.showButtons,hide:t.hObject.killButtons}},[s("div",{staticClass:"button fill",class:{"btn-disabled":t.disableActions()},on:{click:function(e){t.action("hit")}}},[s("span",[t._v("HIT")])]),s("div",{staticClass:"button fill",class:{"btn-disabled":t.disableActions()},on:{click:function(e){t.action("stand")}}},[s("span",[t._v("STAND")])])])])])])},y=[],m={name:"Hand",props:["hObject"],components:{Card:f},data:function(){return{showButtons:!1}},methods:{action:function(t){var e=this.hObject;e.buttonsDisabled()||("stand"==t?this.$emit("action",[e.id,"stand"]):"hit"==t&&e.canAcceptCard()&&this.$emit("action",[e.id,"hit"]))},disableActions:function(){return!!this.hObject.buttonsDisabled()},setPlayer:function(){this.$emit("setPlayer")}}},b=m,_=(s("9d61"),Object(d["a"])(b,v,y,!1,null,"0dfa9dc4",null));_.options.__file="Hand.vue";var g=_.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dealer"},[s("div",{staticClass:"card-row"},[s("span",{staticClass:"value"},[t._v(" "+t._s(t.dObject.value_display())+" ")]),t._l(t.dObject.cards,function(e){return s("Card",{key:e.id,attrs:{cObject:e,hand_stat:t.dObject.quick_status()}})})],2),s("div",{staticClass:"text"},[t._v(" dealer draws to "+t._s(t.dObject.threshold-1)+", stands on "+t._s(t.dObject.threshold))])])},w=[],C={name:"Dealer",props:["dObject"],components:{Card:f}},j=C,O=(s("46b0"),Object(d["a"])(j,k,w,!1,null,"196e5b02",null));O.options.__file="Dealer.vue";var T=O.exports,A=(s("c5f6"),s("6b54"),s("d4ec")),x=s("bee2"),D=function(){function t(e,s,i){Object(A["a"])(this,t),this.face_value=e.toString(),this.suit=s,this.id=i,this.flipped=!1,this._sd={s:["♠","black"],h:["♥","red"],c:["♣","black"],d:["♦","red"]},this._fd={K:10,Q:10,J:10,A:11}}return Object(x["a"])(t,[{key:"down",value:function(){this.flipped=!0}},{key:"up",value:function(){this.flipped=!1}},{key:"value",get:function(){return this.face_value.isNaN()?Number(this._fd[this.face_value]):Number(this.face_value)}},{key:"colour",get:function(){return this._sd[this.suit][1]}},{key:"icon",get:function(){return this._sd[this.suit][0]}}]),t}(),L=function(){function t(e,s,i,a,n,r,o){Object(A["a"])(this,t),this.cards=a||[],this.isPlayer=i||!1,this.isDealer=n||!1,this.isAi=o||!1,this.threshold=r,this.colour=s,this.id=e,this.hasStood=!1,this.isTurn=!1,this.hasWon=!1,this.hasTied=!1,this.hasLost=!1,this.showButtons=!1,this.killButtons=!0,this.showStood=!1}return Object(x["a"])(t,[{key:"reset",value:function(){this.cards=[],this.hasStood=!1}},{key:"value",value:function(){for(var t=0,e={K:10,Q:10,J:10,A:11},s=0,i=this.cards,a=0;a<i.length;a++){var n=i[a].face_value.toString().toUpperCase();n in e?(t+=e[n],"A"==n&&(s+=1)):t+=Number(i[a].face_value)}while(t>21&&s>0)t-=10,s-=1;return t}},{key:"value_display",value:function(){return this.value_obscured()?"~~":this.value()}},{key:"value_compare",value:function(){return this.bust()?0:this.value()}},{key:"value_obscured",value:function(){for(var t=!1,e=0;e<this.cards.length;e++)if(this.cards[e].flipped){t=!0;break}return!!t}},{key:"blackjack",value:function(){return 21==this.value()}},{key:"bust",value:function(){return this.value()>21}},{key:"quick_status",value:function(){return this.value_obscured()||this.hasTied?0:this.bust()||this.hasLost?2:this.blackjack()||this.hasWon?1:this.showStood?3:0}},{key:"canAcceptCard",value:function(){return!(this.blackjack()||this.bust()||this.hasStood)}},{key:"addCard",value:function(t){if(!this.canAcceptCard())return console.error("Hand - Card added to hand without checking addCard() !"),t;t instanceof D?this.cards.push(t):this.cards.push(new D(t.face_value,t.suit,t.id))}},{key:"removeCard",value:function(t){this.cards.splice(t,1)}},{key:"clearHand",value:function(){this.cards=[]}},{key:"stand",value:function(){this.hasStood=!0,this.showStood=!0}},{key:"notPlayer",value:function(){var t=this;this.isPlayer&&(t.isPlayer=!1,t.showButtons=!1,setTimeout(function(){t.killButtons=!0},0))}},{key:"setPlayer",value:function(){var t=this;t.isPlayer=!0,t.killButtons=!1,setTimeout(function(){t.showButtons=!0},800)}},{key:"buttonsDisabled",value:function(){return!this.canAcceptCard()||!this.isTurn}},{key:"getMove",value:function(){if(this.isAi)return!this.hasStood&&(!(this.value()>=this.threshold)||(this.hasStood=!0,!1));console.error("getMove() called on player object.")}},{key:"dealerWillAccept",value:function(){if(this.isDealer)return!(this.value()>=this.threshold)}},{key:"showAllCards",value:function(){for(var t=0;t<this.cards.length;t++)this.cards[t].up()}}]),t}(),S={name:"Game",components:{Card:f,Hand:g,Dealer:T},created:function(){function t(t,e){if(t.fireEvent)t.fireEvent("on"+e);else{var s=document.createEvent("Events");s.initEvent(e,!0,!1),t.dispatchEvent(s)}}setTimeout(function(){t(document.getElementById("setup"),"click")},200)},data:function(){return{dealer:new L(0,"black",!1,[],!0,this.$parent.dealer_threshold),player_count:this.$parent.player_count,deck_count:this.$parent.deck_count,hideAICards:this.$parent.hideAICards,players:[],player_id:Math.floor(this.$parent.player_count/2),fv_array:["A","2","3","4","5","6","7","8","9","10","J","Q","K"],su_array:["s","c","h","d"],card_id_counter:0,player_id_counter:0,deck:[],shuffleAmount:1e5,timerList:[],turnLength:1e3}},methods:{createHands:function(){for(var t=0,e=0;e<this.player_count;e++){var s=!0;e==this.player_id&&(s=!1);var i=this.$parent.ai_threshold,a=new L(this.player_id_counter++,"hsla("+t+", 50%, 45%, 1)",!1,[],!1,i,s);t+=360/this.player_count,this.players.push(a)}},dealAll:function(){this.selectiveDeal(this.playersAccepting())},giveCard:function(t){if(t.canAcceptCard()){var e=this.popCard();return this.hideAICards&&t.isAi&&e.down(),t.addCard(e),!0}return!1},playersAccepting:function(){for(var t=[],e=0;e<this.players.length;e++)this.players[e].canAcceptCard()&&t.push(e);return t},generateRange:function(t,e){return void 0===t||void 0===e?[]:Array(e-t+1).fill().map(function(e,s){return t+s})},cullRange:function(t){for(var e=[],s=0;s<t.length;s++)this.players[t[s]].canAcceptCard()&&e.push(t[s]);return e},selectiveDeal:function(t,e,s,i,a,n){var r=-1,o=this,l=s||200,c=i||function(){},h=n||[];2==h.length?(h=this.generateRange(h[0],h[1]),r=h[0]-1):1==h.length?(h=this.generateRange(h[0],this.players.length-1),r=h[0]-1):0==h.length&&(h=t,r=t[0]-1);var u=setInterval(function(){if(r++,r>h[h.length-1])window.clearInterval(u),c();else{var t=o.players[r];if(a){t.isTurn=!0;var e=setTimeout(function(){o.giveCard(t),t.hasStood&&(t.showStood=!0);var e=setTimeout(function(){t.isTurn=!1},l/2);o.timerList.push(e)},l/2);o.timerList.push(e)}else o.giveCard(t)}},l);if(o.timerList.push(u),0!=e){var d=setTimeout(function(){if(o.dealer.canAcceptCard()){var t=o.popCard();2==e&&t.down(),o.dealer.addCard(t)}},l*(h.length+1));o.timerList.push(d)}},superDeal:function(){for(var t=this,e=0;e<6;e++){var s=setTimeout(function(){t.dealAll()},1e3*e);t.timerList.push(s)}},dealCard:function(t){var e=this.deck;0==e.length&&console.error("Deck out of cards."),t.cards.push(this.popCard())},popCard:function(){return 0==this.deck.length&&this.createDecks(),this.deck.pop(Math.floor(Math.random()*this.deck.length))},chooseRandomItem:function(t){return t[Math.floor(Math.random()*t.length)]},createDecks:function(){for(var t=0;t<this.deck_count;t++)for(var e=0;e<this.su_array.length;e++)for(var s=0;s<this.fv_array.length;s++)this.deck.push(new D(this.fv_array[s],this.su_array[e],this.card_id_counter++));this.shuffleDeck()},shuffleDeck:function(){for(var t=0;t<this.shuffleAmount;t++){var e=Math.floor(Math.random()*this.deck.length),s=Math.floor(Math.random()*this.deck.length),i=this.deck[e];this.deck[e]=this.deck[s],this.deck[s]=i}},setPlayer:function(t){for(var e=0;e<this.players.length;e++)this.players[e].notPlayer();this.players[t].setPlayer()},handEvent:function(t){var e=t[1];"hit"==e?this.selectiveDeal([t[0]],0):"stand"==e&&this.players[t[0]].stand(),this.runGame("roundSecondHalf")},stopGame:function(){this.runGame()},runGame:function(t){var e=this,s=this;if("setup"==t){window.globalGameHook=s,window.stopGame=this.stopGame,s.runGame("reset"),s.createDecks(),s.createHands();var i=setTimeout(function(){s.dealAll();var t=setTimeout(function(){s.selectiveDeal(s.playersAccepting(),2,void 0,s.runGameNewRound);var t=setTimeout(function(){s.players[s.player_id].setPlayer()},1500);s.timerList.push(t)},1200);s.timerList.push(t)},1500);s.timerList.push(i)}else if("reset"==t){for(var a=0;a<this.timerList.length;a++)try{clearInterval(this.timerList[a])}catch(v){clearTimeout(this.timerList[a])}this.timerList=[],this.players=[],this.player_id_counter=0,this.card_id_counter=0,this.deck=[],this.dealer.clearHand(),this.$emit("reset")}else if("round"==t){for(var n=!1,r=0;r<this.players.length;r++)this.players[r].canAcceptCard()&&(n=!0);n?this.runGame("roundFirstHalf"):this.runGame("dealersTurn")}else if("roundFirstHalf"==t){for(var o=[],l=0;l<this.players.slice(0,this.player_id).length;l++)this.players[l].getMove()&&o.push(this.players[l].id);this.selectiveDeal(o,0,this.turnLength,this.runGameFirstHalfCallback,!0,[0,this.player_id-1])}else if("firstHalfCallback"==t){var c=this.players[this.player_id];c.canAcceptCard()?c.isTurn=!0:this.runGame("roundSecondHalf")}else if("roundSecondHalf"==t){var h=setTimeout(function(){e.players[e.player_id].isTurn=!1},750);this.timerList.push(h),o=[];for(var u=this.player_id+1;u<this.players.length;u++)this.players[u].getMove()||o.push(this.players[u].id);this.selectiveDeal(o,0,this.turnLength,this.runGameNewRound,!0,[this.player_id+1])}else if("dealersTurn"==t)this.dealer.cards[1].up(),this.giveDealer();else if("finalise"==t){var d=[],p=[];for(a=0;a<this.players.length;a++){var f=this.players[a].value();f<=21&&f>this.dealer.value_compare()?(this.players[a].hasWon=!0,d.push(this.players[a]),a==this.player_id&&this.$emit("playerWin")):f==this.dealer.value()&&f>21?this.players[a].hasLost=!0:f==this.dealer.value()?this.players[a].hasTied=!0:(this.players[a].hasLost=!0,p.push(this.players[a])),this.players[a].showAllCards()}setTimeout(function(){s.runGame("setup")},6e3)}},runGameFirstHalfCallback:function(){this.runGame("firstHalfCallback")},runGameNewRound:function(){this.runGame("round")},giveDealer:function(){var t=this;if(this.dealer.dealerWillAccept()){var e=setTimeout(function(){t.giveCard(t.dealer),t.giveDealer()},500);t.timerList.push(e)}else this.runGame("finalise")}}},M=S,H=(s("68e4"),Object(d["a"])(M,r,o,!1,null,null,null));H.options.__file="Game.vue";var G=H.exports,P={name:"app",components:{Game:G},mounted:function(){window.fireworksLoopRunning=!1,window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();var t,e,s=document.getElementById("pyro"),i=s.getContext("2d"),a=window.innerWidth,n=window.innerHeight,r=[],o=[],l=120,c=5,h=0,u=10,d=0,p=!1;function f(t,e){return Math.random()*(e-t)+t}function v(t,e,s,i){var a=t-s,n=e-i;return Math.sqrt(Math.pow(a,2)+Math.pow(n,2))}function y(t,e,s,i){this.x=t,this.y=e,this.sx=t,this.sy=e,this.tx=s,this.ty=i,this.distanceToTarget=v(t,e,s,i),this.distanceTraveled=0,this.coordinates=[],this.coordinateCount=3;while(this.coordinateCount--)this.coordinates.push([this.x,this.y]);this.angle=Math.atan2(i-e,s-t),this.speed=2,this.acceleration=1.05,this.brightness=f(50,70),this.targetRadius=0}function m(t,e){this.x=t,this.y=e,this.coordinates=[],this.coordinateCount=5;while(this.coordinateCount--)this.coordinates.push([this.x,this.y]);this.angle=f(0,2*Math.PI),this.speed=f(1,10),this.friction=.95,this.gravity=1,this.hue=f(l-50,l+50),this.brightness=f(50,80),this.alpha=1,this.decay=f(.015,.03)}function b(t,e){var s=20;while(s--)o.push(new m(t,e))}s.width=a,s.height=n,y.prototype.update=function(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.acceleration;var e=Math.cos(this.angle)*this.speed,s=Math.sin(this.angle)*this.speed;this.distanceTraveled=v(this.sx,this.sy,this.x+e,this.y+s),this.distanceTraveled>=this.distanceToTarget?(b(this.tx,this.ty),r.splice(t,1)):(this.x+=e,this.y+=s)},y.prototype.draw=function(){i.beginPath(),i.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),i.lineTo(this.x,this.y),i.strokeStyle="hsl("+l+", 100%, "+this.brightness+"%)",i.stroke()},m.prototype.update=function(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.alpha-=this.decay,this.alpha<=this.decay&&o.splice(t,1)},m.prototype.draw=function(){i.beginPath(),i.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),i.lineTo(this.x,this.y),i.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+this.alpha+")",i.stroke()};var _=!1;function g(){_=!0,r=[],o=[],i.clearRect(0,0,s.width,s.height)}function k(){if(!window.fireworksLoopRunning)return _||g(),void setTimeout(k,500);_=!1,window.requestAnimFrame(k),l=f(0,360),i.globalCompositeOperation="destination-out",i.fillStyle="rgba(0, 0, 0, 0.5)",i.fillRect(0,0,a,n),i.globalCompositeOperation="lighter";var s=r.length;while(s--)r[s].draw(),r[s].update(s);var v=o.length;while(v--)o[v].draw(),o[v].update(v);d>=u?p||(r.push(new y(a/2,n,f(0,a),f(0,n/2))),d=0):d++,h>=c?p&&(r.push(new y(a/2,n,t,e)),h=0):h++}s.addEventListener("mousemove",function(i){t=i.pageX-s.offsetLeft,e=i.pageY-s.offsetTop}),s.addEventListener("mousedown",function(t){t.preventDefault(),p=!0}),s.addEventListener("mouseup",function(t){t.preventDefault(),p=!1}),k()},data:function(){return{player_count:7,deck_count:6,dealer_threshold:17,ai_threshold:16,hideAICards:!0,playerHasWon:!1}},methods:{startFireworks:function(){this.playerHasWon=!0,window.fireworksLoopRunning=!0,document.getElementsByTagName("body")[0].style.backgroundColor="black"},stopFireworks:function(){this.playerHasWon=!1,window.fireworksLoopRunning=!1,document.getElementsByTagName("body")[0].style.backgroundColor="rgb(26, 26, 26)"}}},E=P,$=(s("034f"),Object(d["a"])(E,a,n,!1,null,null,null));$.options.__file="App.vue";var R=$.exports,B=s("8c4f"),W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("router-link",{attrs:{to:{name:"game"}}},[t._v("\n    zoom →\n  ")])],1)},F=[],I={},N=I,q=(s("c21d"),Object(d["a"])(N,W,F,!1,null,null,null));q.options.__file="Welcome.vue";var z=q.exports;i["a"].use(B["a"]);var J=new B["a"]({routes:[{path:"/",name:"welcome",component:z},{path:"/play",name:"game",component:G}]});i["a"].config.productionTip=!1,new i["a"]({router:J,render:function(t){return t(R)}}).$mount("#app")},"64a9":function(t,e,s){},"68e4":function(t,e,s){"use strict";var i=s("4366"),a=s.n(i);a.a},8267:function(t,e,s){},"88d4":function(t,e,s){},"8e73":function(t,e,s){},"9d61":function(t,e,s){"use strict";var i=s("88d4"),a=s.n(i);a.a},c21d:function(t,e,s){"use strict";var i=s("2ab4"),a=s.n(i);a.a},fddd:function(t,e,s){"use strict";var i=s("8e73"),a=s.n(i);a.a}});
//# sourceMappingURL=app.7e956534.js.map